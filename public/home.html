<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FÚRIA Hub - Cards</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;600;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.5.0/css/glide.core.min.css">
  
  <style>
    :root {
      --furia-black: #0A0A0A;
      --furia-white: #FFFFFF;
      --furia-gray: #1A1A1A;
      --furia-silver: #C4C4C4;
    }
    
    body {
      font-family: 'Archivo', sans-serif;
      background: linear-gradient(45deg, var(--furia-black) 0%, #111 100%);
      color: var(--furia-white);
      min-height: 100vh;
    }
    
    .btn-furia {
      background: linear-gradient(135deg, var(--furia-silver) 0%, var(--furia-gray) 100%);
      color: var(--furia-black);
      border: 2px solid var(--furia-white);
      font-weight: 800;
      border-radius: 8px;
      padding: 1.2rem 2.5rem;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      font-size: 1rem;
    }
    
    .btn-furia:hover {
      background: var(--furia-white);
      color: var(--furia-black);
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(255, 255, 255, 0.1);
    }
    
    .glow-card, .carousel-item {
      background: rgba(30,30,30,0.95);
      border-radius: 1rem;
      transition: box-shadow .3s, border-color .3s, transform .3s;
      box-shadow: 0 2px 16px #0004;
      border: 1.5px solid var(--furia-gray);
      overflow: hidden;
    }
    
    .glow-card:hover, .carousel-item:hover {
      box-shadow: 0 0 16px 2px var(--furia-silver), 0 4px 32px #00e5ff44;
      border-color: var(--furia-silver);
      transform: scale(1.05);
    }
    
    .navbar-furia {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      background: var(--furia-black);
      border-bottom: 1.5px solid var(--furia-gray);
      padding: 0.5rem 1.5rem;
    }
    
    .navbar-center {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      height: 100%;
    }
    
    .dropdown {
      position: relative;
      display: inline-block;
    }
    
    .dropdown-content {
      display: none;
      position: absolute;
      right: 0;
      background-color: var(--furia-gray);
      min-width: 160px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      border: 1px solid var(--furia-silver);
      border-radius: 4px;
      z-index: 1;
    }
    
    .dropdown-content a, .dropdown-content button {
      color: var(--furia-white);
      padding: 12px 16px;
      text-decoration: none;
      display: block;
      background: none;
      border: none;
      width: 100%;
      text-align: left;
      cursor: pointer;
    }
    
    .dropdown-content a:hover, .dropdown-content button:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
    
    .dropdown:hover .dropdown-content {
      display: block;
    }
    
    .carousel-item {
      flex: 0 0 auto;
      width: 260px;
      margin: 0 0.5rem;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      align-items: center;
      cursor: pointer;
      scale: 0.9;
    }
    
    .glide__arrow {
      background: rgba(10,10,10,0.7);
      border: 1.5px solid var(--furia-gray);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      color: white;
      transition: all 0.3s;
    }
    
    .glide__arrow:hover {
      background: var(--furia-silver);
      color: var(--furia-black);
      border-color: var(--furia-silver);
    }
    
    .glide__bullets {
      bottom: -2rem;
    }
    
    .glide__bullet {
      background: var(--furia-gray);
      border: none;
      width: 10px;
      height: 10px;
    }
    
    .glide__bullet--active {
      background: var(--furia-silver);
    }
    
    @media (max-width: 1100px) {
      .carousel-item { width: 180px; }
    }
    
    @media (max-width: 900px) {
      .carousel-item { width: 120px; }
    }
  </style>
</head>
<body>

  <nav class="navbar-furia relative">
    <div class="flex items-center gap-3">
      <img src="Assets/Furia_Esports_logo.png" alt="Logo FÚRIA" class="w-16 h-16 invert">
      <div class="h-12 w-[2px] bg-[#333] rotate-12"></div>
      <h1 class="text-2xl md:text-3xl font-black uppercase tracking-widest flex items-center gap-1">
        <span class="text-[#C4C4C4]">FÚRIA</span>
        <span class="text-white">HUB</span>
      </h1>
    </div>
    
    <div class="navbar-center">
      <a href="/home" class="text-white font-bold text-lg tracking-widest px-6 py-2 hover:text-[#C4C4C4] transition border-b-2 border-transparent hover:border-[#C4C4C4]">
        HOME
      </a>
    </div>
    
    <div class="flex items-center gap-4">
      <div class="dropdown">
        <button class="p-2 rounded-full hover:bg-[#222] transition" aria-label="Perfil">
          <svg class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2" fill="none" />
            <path stroke="currentColor" stroke-width="2" d="M4 20c0-4 4-6 8-6s8 2 8 6" />
          </svg>
        </button>
        <div class="dropdown-content">
          <div id="user-name" class="px-4 py-2 text-white font-bold text-center">Carregando...</div>
          <a href="/perfil">Perfil</a>
          <button id="logout-btn">Logout</button>
        </div>
      </div>
    </div>
  </nav>

  <section class="w-full flex justify-center mb-16 mt-10">
    <div class="w-full max-w-6xl flex flex-col items-center" >
      <div class="glide w-full relative">
        <div class="glide__track" data-glide-el="track">
          <ul class="glide__slides">
            <li class="glide__slide">
              <div class="carousel-item">
                <img src="Assets/modelo_camisa1.jpg" class="w-full h-40 object-cover" alt="Camiseta Furia Oficial '24 Preta">
                <div class="p-5 w-full text-center">
                  <h2 class="text-xl font-bold text-white mb-1">Camiseta Furia Oficial '24 Preta</h2>
                  <span class="text-gray-400 text-base">Modelo 1</span>
                </div>
              </div>
            </li>
            
            <li class="glide__slide">
              <div class="carousel-item">
                <img src="Assets/modelo_camisa2.jpg" class="w-full h-40 object-cover" alt="Camiseta Oficial Furia | Adidas Preta">
                <div class="p-5 w-full text-center">
                  <h2 class="text-xl font-bold text-white mb-1">Camiseta Oficial Furia | Adidas Preta</h2>
                  <span class="text-gray-400 text-base">Modelo 2</span>
                </div>
              </div>
            </li>
            
            <li class="glide__slide">
              <div class="carousel-item">
                <img src="Assets/modelo_camisa3.jpg" class="w-full h-40 object-cover" alt="Camiseta Furia Classic Preta">
                <div class="p-5 w-full text-center">
                  <h2 class="text-xl font-bold text-white mb-1">Camiseta Furia Classic Preta</h2>
                  <span class="text-gray-400 text-base">Modelo 3</span>
                </div>
              </div>
            </li>
            
            <li class="glide__slide">
              <div class="carousel-item">
                <img src="Assets/modelo_camisa4.jpg" class="w-full h-40 object-cover" alt="Camiseta Furia Classic 2 Azul Marinho">
                <div class="p-5 w-full text-center">
                  <h2 class="text-xl font-bold text-white mb-1">Camiseta Furia Classic 2 Azul</h2>
                  <span class="text-gray-400 text-base">Modelo 4</span>
                </div>
              </div>
            </li>
          </ul>
        </div>
        
        <div class="glide__arrows flex justify-center items-center w-full gap-2 mt-4" data-glide-el="controls">
          <button class="glide__arrow glide__arrow--left" data-glide-dir="<">&#10094;</button>
          <button class="glide__arrow glide__arrow--right" data-glide-dir=">">&#10095;</button>
        </div>
        
        <div class="glide__bullets flex justify-center items-center w-full gap-2 mt-2" data-glide-el="controls[nav]">
          <button class="glide__bullet" data-glide-dir="=0"></button>
          <button class="glide__bullet" data-glide-dir="=1"></button>
          <button class="glide__bullet" data-glide-dir="=2"></button>
          <button class="glide__bullet" data-glide-dir="=3"></button>
        </div>
      </div>
      
      <div class="w-full flex flex-col items-center mt-10">
        <div class="bg-[var(--furia-black)]/95 rounded-2xl px-10 py-8 shadow-2xl border border-[var(--furia-silver)] max-w-2xl text-center relative">
          <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-3">Quer ter a oportunidade de ganhar alguma dessas camisas acima?</h1>
          <p class="text-xl text-[var(--furia-silver)] mb-6 font-semibold">Complete o seu perfil para concorrer!</p>
         <a href="/form">
    <button class="btn-furia text-lg px-10 py-3 shadow-lg">Saiba mais</button>
          </a>
        </div>
      </div>
    </div>
  </section>

  <main class="flex flex-col items-center py-10 px-4">
    <header class="text-center mb-10">
      <h1 class="text-6xl md:text-7xl font-extrabold mb-2 tracking-[2px]">MODALIDADES DA PANTERA</h1>
      <h2 class="text-5xl md:text-6xl font-semibold text-gray-400">GO FURIA!</h2>
    </header>
    
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 max-w-6xl w-full">
      <article class="glow-card flex flex-col items-center">
        <img class="w-full h-40 object-cover" src="Assets/furia_KINGS_LEAGUE.jpg" alt="Kings League">
        <div class="p-6 flex flex-col items-center">
          <h3 class="text-xl font-bold text-[#C4C4C4] mb-2">KINGS LEAGUE</h3>
          <p class="text-gray-400 mb-4 text-center">FURIA compete na inovadora liga de futebol 7, trazendo o DNA competitivo para o universo da Kings League.</p>
          <a href="#" class="btn-furia">Saiba mais</a>
        </div>
      </article>
      
      <article class="glow-card flex flex-col items-center">
        <img class="w-full h-40 object-cover" src="Assets/furia_PUBG.jpg" alt="PUBG">
        <div class="p-6 flex flex-col items-center">
          <h3 class="text-xl font-bold text-[#C4C4C4] mb-2">PUBG</h3>
          <p class="text-gray-400 mb-4 text-center">A equipe de PUBG da FURIA é referência no cenário sul-americano, com participações em torneios internacionais.</p>
          <a href="#" class="btn-furia">Saiba mais</a>
        </div>
      </article>
      
      <article class="glow-card flex flex-col items-center">
        <img class="w-full h-40 object-cover" src="Assets/furia_CS.jpg" alt="Counter-Strike">
        <div class="p-6 flex flex-col items-center">
          <h3 class="text-xl font-bold text-[#C4C4C4] mb-2">COUNTER-STRIKE</h3>
          <p class="text-gray-400 mb-4 text-center">FURIA é destaque mundial em CS, com campanhas históricas em Majors e presença constante entre os melhores times.</p>
          <a href="#" class="btn-furia">Saiba mais</a>
        </div>
      </article>
      
      <article class="glow-card flex flex-col items-center">
        <img class="w-full h-40 object-cover" src="Assets/furia_r6.jpg" alt="Rainbow Six Siege">
        <div class="p-6 flex flex-col items-center">
          <h3 class="text-xl font-bold text-[#C4C4C4] mb-2">Rainbow Six Siege</h3>
          <p class="text-gray-400 mb-4 text-center">A equipe de Rainbow Six Siege da FURIA compete nos principais torneios nacionais e internacionais da modalidade.</p>
          <a href="#" class="btn-furia">Saiba mais</a>
        </div>
      </article>
      
      <article class="glow-card flex flex-col items-center">
        <img class="w-full h-40 object-cover" src="Assets/furia_valorant.jpg" alt="Valorant">
        <div class="p-6 flex flex-col items-center">
          <h3 class="text-xl font-bold text-[#C4C4C4] mb-2">Valorant</h3>
          <p class="text-gray-400 mb-4 text-center">Presente desde o início do competitivo, FURIA disputa a liga internacional e representa o Brasil no Valorant.</p>
          <a href="#" class="btn-furia">Saiba mais</a>
        </div>
      </article>
      
      <article class="glow-card flex flex-col items-center">
        <img class="w-full h-40 object-cover" src="Assets/furia_LOL.jpg" alt="League Of Legends">
        <div class="p-6 flex flex-col items-center">
          <h3 class="text-xl font-bold text-[#C4C4C4] mb-2">League Of Legends</h3>
          <p class="text-gray-400 mb-4 text-center">FURIA disputa o CBLOL e busca o topo do cenário brasileiro de League of Legends com elencos competitivos.</p>
          <a href="#" class="btn-furia">Saiba mais</a>
        </div>
      </article>
    </div>    
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.5.0/glide.min.js"></script>
 <script>
  // Função principal que verifica autenticação do usuário
  document.addEventListener('DOMContentLoaded', async () => {
    const token = localStorage.getItem('authToken') || getCookie('authToken');

    if (window.location.pathname === '/' && !token) {
      return window.location.href = '/login';
    }

    if (token) {
      try {
        const response = await fetch('/check-auth', {
          method: 'GET',
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
          },
          credentials: 'include'
        });

        const data = await response.json();

        if (!response.ok) {
          localStorage.removeItem('authToken');
          if (window.location.pathname === '/') {
            window.location.href = '/login';
          }
          return;
        }

        updateUI(data.user);
        setupLogout();

      } catch (error) {
        if (window.location.pathname === '/') {
          window.location.href = '/login';
        }
      }
    }

    function setupLogout() {
      const logoutBtn = document.getElementById('logout-btn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', async () => {
          await fetch('/logout', { 
            method: 'POST',
            credentials: 'include'
          });
          localStorage.removeItem('authToken');
          window.location.href = '/login';
        });
      }
    }
    
    function getCookie(name) {
      const cookies = document.cookie.split('; ');
      for (const cookie of cookies) {
        const [cookieName, ...valueParts] = cookie.split('=');
        if (cookieName === name) return valueParts.join('=');
      }
      return null;
    }

    function updateUI(user) {
      const userNameElement = document.getElementById('user-name');
      if (userNameElement) {
        userNameElement.textContent = user.nome;
      }
    }
  });

  // Inicialização do carrossel de produtos
  document.addEventListener('DOMContentLoaded', function() {
    if (document.querySelector('.glide')) {
      new Glide('.glide', {
        type: 'carousel',
        startAt: 0,
        perView: 4,
        gap: 20,
        breakpoints: {
          1100: { perView: 3 },
          900: { perView: 2 },
          600: { perView: 1 }
        }
      }).mount();
    }

    document.addEventListener('click', function(e) {
      if (e.target && e.target.id === 'logout-btn') {
        e.preventDefault();
        handleLogout();
      }
      
      if (e.target && e.target.classList.contains('profile-link')) {
        e.preventDefault();
        window.location.href = '/perfil';
      }
    });
  });

  // Função para lidar com logout
  async function handleLogout() {
    try {
      const response = await fetch('/logout', {
        method: 'POST',
        credentials: 'include',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${localStorage.getItem('authToken')}`
        }
      });
  
      if (!response.ok) throw new Error('Logout falhou');
  
      localStorage.removeItem('authToken');
      document.cookie = 'authToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.' + window.location.hostname + ';';
      
      window.location.href = '/login';
    } catch (error) {
      localStorage.removeItem('authToken');
      document.cookie = 'authToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
      window.location.href = '/login';
    }
  }
</script>
</body>
</html>